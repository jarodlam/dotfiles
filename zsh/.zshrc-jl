# Layered on top of system config.
# Add to top of system ~/.zshrc:
#   source ~/.zshrc-jl

# Enable zsh completion system
autoload -Uz compinit
autoload -Uz bashcompinit
compinit
bashcompinit

# zsh vi mode
bindkey -v

# zsh history settings
HISTFILE=~/.zsh_history
HISTFILESIZE=10000000
HISTSIZE=10000000
SAVEHIST=500000
setopt INC_APPEND_HISTORY
setopt SHARE_HISTORY
setopt APPENDHISTORY

# zsh autocomplete dot files
setopt GLOBDOTS

# zsh syntax highlighting plugin
source ~/.config/zsh/fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh

# default editor
export VISUAL=nvim
export EDITOR=nvim

# fzf
source <(fzf --zsh)

# starship
eval "$(starship init zsh)"

# yazi
function y() {
  local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
  yazi "$@" --cwd-file="$tmp"
  IFS= read -r -d '' cwd < "$tmp"
  [ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
  rm -f -- "$tmp"
}

# direnv
eval "$(direnv hook zsh)"

# aliases
alias nd='(){ nix develop .#$1 -vv --command zsh }'
alias lg='lazygit'
